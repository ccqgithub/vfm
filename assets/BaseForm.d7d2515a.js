var R=Object.defineProperty,M=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var F=(l,r,a)=>r in l?R(l,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[r]=a,L=(l,r)=>{for(var a in r||(r={}))O.call(r,a)&&F(l,a,r[a]);if(E)for(var a of E(r))Z.call(r,a)&&F(l,a,r[a]);return l},q=(l,r)=>M(l,z(r));import{c as j,F as b,u as H,a as J,V as K}from"./vfm.es.e0f12258.js";import{_ as k,f as C,o as n,c as u,a as e,b as _,w as f,s as g,h as s,t as m,F as x,l as A,$ as D,a0 as N,I as U,K as w,a1 as G,L as V,q as Q,m as P,R as W,a2 as X}from"./app.708175ee.js";const t=j({initValues:{username:"",password:"",passwordConfirm:"",baseInfo:{birthDay:"",age:""},tags:[],address:[],schools:[]},touchType:"BLUR",readonly:!1}),Y=e("div",{class:"vfm-block-title"},"Base Info",-1),ee={class:"vfm-p"},se=e("div",{class:"vfm-label"}," Birth Day: ",-1),te={class:"vfm-value"},oe={class:"vfm-error"},ae={class:"vfm-p"},le=e("div",{class:"vfm-label"}," Age: ",-1),re={class:"vfm-value"},de={class:"vfm-error"},ie=C({__name:"BaseInfo",setup(l){return t.state,(r,a)=>{var p,i;return n(),u(x,null,[Y,e("div",ee,[se,e("div",te,[_(s(b),{form:s(t),name:"baseInfo.birthDay",rules:[{required:!0}],value:"1988"},{default:f(({field:c})=>[e("input",g({class:"vfm-input",type:"text"},c),null,16)]),_:1},8,["form"]),e("div",oe,m((p=s(t).fieldError("baseInfo.birthDay"))==null?void 0:p.message),1)])]),e("div",ae,[le,e("div",re,[_(s(b),{form:s(t),name:"baseInfo.age",rules:[{required:!0}]},{default:f(({field:c})=>[e("input",g({class:"vfm-input",type:"text"},c),null,16)]),_:1},8,["form"]),e("div",de,m((i=s(t).fieldError("baseInfo.age"))==null?void 0:i.message),1)])])],64)}}});var ne=k(ie,[["__file","BaseInfo.vue"]]);const I=l=>(D("data-v-da33b41e"),l=l(),N(),l),ce=I(()=>e("div",{class:"vfm-block-title"},"Address",-1)),ve={class:"vfm-p"},_e=I(()=>e("div",{class:"vfm-label"}," Phone: ",-1)),ue={class:"vfm-value"},me={class:"vfm-error"},fe={class:"vfm-p"},pe=I(()=>e("div",{class:"vfm-label"}," Detail: ",-1)),he={class:"vfm-value"},be={class:"vfm-error"},ge={class:"vfm-p"},$e=["onClick"],ye={class:"vfm-p"},Se=C({__name:"AddressList",setup(l){const{fields:r,append:a,remove:p}=H({form:t,path:"address"}),i=()=>{a({phone:"",detail:""})},c=h=>{p(h)};return(h,d)=>(n(),u(x,null,[ce,(n(!0),u(x,null,A(s(r),(o,v)=>{var $,S;return n(),u("div",{class:"block",key:o.id},[e("div",ve,[_e,e("div",ue,[_(s(b),{form:s(t),name:`address.${v}.phone`,rules:[{required:!0}]},{default:f(({field:y})=>[e("input",g({class:"vfm-input",type:"text"},y),null,16)]),_:2},1032,["form","name"]),e("div",me,m(($=s(t).fieldError(`address.${v}.phone`))==null?void 0:$.message),1)])]),e("div",fe,[pe,e("div",he,[_(s(b),{form:s(t),name:`address.${v}.detail`,rules:[{required:!0}]},{default:f(({field:y})=>[e("input",g({class:"vfm-input",type:"text"},y),null,16)]),_:2},1032,["form","name"]),e("div",be,m((S=s(t).fieldError(`address.${v}.detail`))==null?void 0:S.message),1)])]),e("div",ge,[e("div",{class:"vfm-action red",onClick:()=>c(o.id)},"- delete",8,$e)])])}),128)),e("div",ye,[e("div",{class:"vfm-action",onClick:d[0]||(d[0]=()=>i())},"+ Add Address")])],64))}});var xe=k(Se,[["__scopeId","data-v-da33b41e"],["__file","AddressList.vue"]]);const ke={class:"sbox"},Ce=["onUpdate:modelValue"],we=C({__name:"SelectSchool",props:{visible:{type:Boolean,default:!1},value:{type:Array,default:()=>[]}},emits:["change","update:visible"],setup(l,{emit:r}){const a=l,i=U([{name:"School A",address:"School Address A"},{name:"School B",address:"School Address B"},{name:"School C",address:"School Address C"},{name:"School D",address:"School Address D"},{name:"School E",address:"School Address E"}].map(d=>{const o=a.value.find(v=>v.name===d.name);return q(L({},d),{selected:!!o})})),c=()=>{r("update:visible",!1)},h=()=>{const d=i.value.filter(o=>o.selected).map(o=>({name:o.name,address:o.address}));r("change",d),r("update:visible",!1)};return(d,o)=>(n(),u("div",ke,[(n(!0),u(x,null,A(i.value,v=>(n(),u("div",{class:"item",key:v.name},[e("label",null,[w(e("input",{type:"checkbox","onUpdate:modelValue":$=>v.selected=$},null,8,Ce),[[G,v.selected]]),e("span",null,m(v.name)+" <"+m(v.address)+">",1)])]))),128)),e("div",{class:"btns"},[e("button",{onClick:c},"close"),e("button",{onClick:h},"confirm")])]))}});var Ae=k(we,[["__scopeId","data-v-72e6457f"],["__file","SelectSchool.vue"]]);const T=l=>(D("data-v-3c5f93e5"),l=l(),N(),l),Ie={class:"box"},Be=T(()=>e("div",{class:"vfm-block-title"},"Schools",-1)),Ee={class:"vfm-p"},Fe=T(()=>e("div",{class:"vfm-label"}," Selected Schools: ",-1)),Le={class:"vfm-value"},qe=C({__name:"SchoolList",setup(l){const r=t.getPathValueRef("schools"),a=U(!1),p=()=>{a.value=!0};return(i,c)=>(n(),u("div",Ie,[_(s(b),{form:s(t),name:"schools",rules:[{requiredLength:!0,message:"Must select one school"}]},{default:f(({field:h})=>{var d;return[Be,e("div",Ee,[Fe,e("div",Le,[w(e("div",{class:"vfm-input",onClick:p},m(s(r).map(o=>o.name).join(",")),513),[[V,!a.value]]),w(e("div",{class:"vfm-error"},m((d=s(t).fieldError("schools"))==null?void 0:d.message),513),[[V,!a.value]]),a.value?(n(),Q(Ae,g({key:0},h,{visible:a.value,"onUpdate:visible":c[0]||(c[0]=o=>a.value=o)}),null,16,["visible"])):P("",!0)])])]}),_:1},8,["form"])]))}});var Ve=k(qe,[["__scopeId","data-v-3c5f93e5"],["__file","SchoolList.vue"]]);const De={class:"vfm"},Ne={class:"vfm-p"},Ue=e("div",{class:"vfm-label"},"User Name:",-1),Pe={class:"vfm-value"},Te={key:0,class:"vfm-error"},Re={key:1,class:"vfm-error"},Me={class:"vfm-p"},ze=e("div",{class:"vfm-label"},"Password:",-1),Oe={class:"vfm-value"},Ze={class:"vfm-error"},je={class:"vfm-p"},He=e("div",{class:"vfm-label"},"Password Confirm:",-1),Je={class:"vfm-value"},Ke={class:"vfm-error"},Ge={class:"vfm-p"},Qe=e("div",{class:"vfm-label"},"Tags:",-1),We={class:"vfm-value"},Xe={class:"vfm-flex"},Ye={class:"vfm-flex-item-box"},es={class:"vfm-flex-item-ins"},ss=["onClick"],ts={class:"vfm-error"},os=["onClick"],as={class:"vfm-p"},ls=e("div",{class:"vfm-label"},"Virtual Field (Tags):",-1),rs={class:"vfm-error"},ds={class:"vfm-p"},is={key:0,class:"vfm-error",style:{width:"100%",textAlign:"center"}},ns=C({__name:"BaseForm",setup(l){const r=t.state,a=()=>{t.submit({onSuccess:i=>{alert(JSON.stringify(i,null,2))},onError:i=>{alert(i.message)}})};W(()=>{t.mount()}),X(()=>{t.unmount()});const p=i=>(console.log("checkName"),new Promise(c=>{setTimeout(()=>{if(i==="test"){c("Username already exists");return}c("")},1e3)}));return(i,c)=>{var h;return n(),u("div",De,[e("div",Ne,[Ue,e("div",Pe,[_(s(b),{form:s(t),name:"username",rules:[{required:!0},{validator:d=>p(d),debounce:300}],"change-type":"ONINPUT"},{default:f(({field:d})=>{var o;return[e("input",g({class:"vfm-input",type:"text"},d),null,16),s(t).isValidating("username")?(n(),u("div",Te," loading... ")):(n(),u("div",Re,m((o=s(t).fieldError("username"))==null?void 0:o.message),1))]}),_:1},8,["form","rules"])])]),e("div",Me,[ze,e("div",Oe,[_(s(b),{form:s(t),name:"password",rules:[{required:!0,pattern:/[a-zA-Z0-9]{8,20}/}]},{default:f(({field:d})=>{var o;return[e("input",g({class:"vfm-input",type:"password"},d),null,16),e("div",Ze,m((o=s(t).fieldError("password"))==null?void 0:o.message),1)]}),_:1},8,["form"])])]),e("div",je,[He,e("div",Je,[_(s(b),{form:s(t),name:"passwordConfirm",deps:()=>({password:s(r).values.password}),rules:[{required:!0,pattern:/[a-zA-Z0-9]{8,20}/},{validator:(d,{password:o})=>o&&d!==o?"The passwordConfirm must same as password":""}]},{default:f(({field:d})=>{var o;return[e("input",g({class:"vfm-input",type:"password"},d),null,16),e("div",Ke,m((o=s(t).fieldError("passwordConfirm"))==null?void 0:o.message),1)]}),_:1},8,["form","deps","rules"])])]),_(ne),e("div",Ge,[Qe,e("div",We,[_(s(J),{form:s(t),name:"tags"},{default:f(({append:d,remove:o,fields:v})=>[e("div",Xe,[(n(!0),u(x,null,A(v,($,S)=>{var y;return n(),u("div",{class:"vfm-flex-item",key:$.id},[e("div",Ye,[e("div",es,[_(s(b),{form:s(t),name:`tags.${S}`,rules:[{required:!0,message:"Required"}]},{default:f(({field:B})=>[e("input",g({class:"vfm-input",type:"text"},B),null,16)]),_:2},1032,["form","name"])]),e("div",{class:"vfm-action red",onClick:B=>o($.id)},"-",8,ss)]),e("div",ts,m((y=s(t).fieldError(`tags.${S}`))==null?void 0:y.message),1)])}),128))]),e("div",{class:"vfm-action",onClick:$=>d("")},"+",8,os)]),_:1},8,["form"])])]),e("div",as,[_(s(K),{form:s(t),name:"tags",value:()=>(s(t).state.values.tags.length,s(t).state.values.tags),rules:[{requiredLength:!0,message:"must have one tag"}]},null,8,["form","value"]),ls,e("div",rs,m((h=s(t).virtualFieldError("tags"))==null?void 0:h.message),1)]),_(xe),_(Ve),e("div",ds,[e("button",{class:"vfm-button",onClick:a},"Submit"),s(t).state.isError?(n(),u("div",is," Have error, cannot submit ")):P("",!0)])])}}});var us=k(ns,[["__file","BaseForm.vue"]]);export{us as default};
